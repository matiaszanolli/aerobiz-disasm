; ============================================================================
; ShowRelationAction -- Draws the relation action screen showing an event-count bar graph (tile run proportional to current vs base count) for attack or defence depending on which count is nonzero
; Called: ?? times.
; 1004 bytes | $0199FA-$019DE5
; ============================================================================
ShowRelationAction:                                                  ; $0199FA
    link    a6,#$0
    movem.l d2-d7/a2-a5,-(sp)
    movea.l $0008(a6),a2
    movea.l #$0d64,a3
    lea     $0016(a6),a4
    lea     $0012(a6),a5
    cmpi.w  #$1,$001a(a6)
    bne.b   .l19a6c
    move.l  ($000A1AE4).l,-(sp)
    pea     ($00FF1804).l
    dc.w    $4eb9,$0000,$3fec                           ; jsr $003FEC
    pea     ($0020).w
    pea     ($0694).w
    pea     ($00FF1804).l
    dc.w    $4eb9,$0000,$4668                           ; jsr $004668
    pea     ($00070F38).l
    pea     ($0004).w
    pea     ($0004).w
    move.w  (a5),d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($001B).w
    jsr     (a3)
    lea     $0030(sp),sp
.l19a6c:                                                ; $019A6C
    pea     ($0020).w
    pea     ($0020).w
    clr.l   -(sp)
    clr.l   -(sp)
    dc.w    $4eb9,$0003,$a942                           ; jsr $03A942
    lea     $0010(sp),sp
    move.w  $000e(a6),d6
    addq.w  #$4,d6
    move.w  (a5),d5
    clr.w   d4
    move.w  $000e(a2),d0
    cmp.w   $0006(a2),d0
    bls.w   .l19bb8
    move.w  #$0331,d7
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    subq.l  #$1,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($000A).w
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    move.w  $000e(a2),d0
    move.l  d0,-(sp)
    pea     ($0064).w
    move.w  $0006(a2),d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0001,$e11c                           ; jsr $01E11C
    lea     $0028(sp),sp
    move.w  d0,d3
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    move.w  d0,d2
    tst.w   d2
    ble.b   .l19b2c
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    addq.l  #$8,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l19b2c:                                                ; $019B2C
    move.w  d3,d0
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e146                           ; jsr $03E146
    lsl.l   #$3,d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    add.w   d7,d0
    move.w  d0,d3
    move.w  d4,d0
    ext.l   d0
    move.w  d3,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($0001).w
    move.w  d5,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    addq.w  #$1,d2
    cmpi.w  #$a,d2
    bge.w   .l19d3c
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$a,d1
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d5,d0
    ext.l   d0
    addq.l  #$1,d0
.l19ba8:                                                ; $019BA8
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    bra.w   .l19d2a
.l19bb8:                                                ; $019BB8
    tst.w   $0006(a2)
    beq.w   .l19cda
    move.w  #$0328,d7
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    addi.l  #$11,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($000A).w
    move.w  d5,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    move.w  $0006(a2),d0
    move.l  d0,-(sp)
    pea     ($0064).w
    move.w  $000e(a2),d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0001,$e11c                           ; jsr $01E11C
    lea     $0028(sp),sp
    move.w  d0,d3
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    move.w  d0,d2
    tst.w   d2
    ble.b   .l19c58
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    addq.l  #$8,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l19c58:                                                ; $019C58
    cmpi.w  #$a,d2
    bge.w   .l19d3c
    move.w  d3,d0
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e146                           ; jsr $03E146
    lsl.l   #$3,d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    add.w   d0,d7
    move.w  d4,d0
    ext.l   d0
    move.w  d7,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($0001).w
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    addq.w  #$1,d2
    cmpi.w  #$a,d2
    bge.w   .l19d3c
    move.w  d4,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$a,d1
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d5,d0
    ext.l   d0
    bra.w   .l19ba8
.l19cda:                                                ; $019CDA
    move.w  d4,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($000A).w
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    move.w  d4,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($000A).w
    move.w  d5,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
.l19d2a:                                                ; $019D2A
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l19d3c:                                                ; $019D3C
    move.w  (a5),d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    addq.l  #$4,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0003,$ab2c                           ; jsr $03AB2C
    moveq   #$0,d0
    move.w  $000e(a2),d0
    move.l  d0,-(sp)
    pea     ($00041116).l
    dc.w    $4eb9,$0003,$b270                           ; jsr $03B270
    move.l  a2,-(sp)
    dc.w    $4eb9,$0000,$74e0                           ; jsr $0074E0
    move.w  d0,d2
    mulu.w  #$c,d0
    movea.l #$00ffa6b9,a0
    move.b  (a0,d0.w),d0
    andi.l  #$ff,d0
    mulu.w  #$a,d0
    move.w  d0,d2
    move.l  d0,-(sp)
    pea     ($0064).w
    move.w  $0010(a2),d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0001,$e11c                           ; jsr $01E11C
    move.w  d0,d3
    cmpi.w  #$64,d3
    bge.b   .l19daa
    move.w  d3,d0
    ext.l   d0
    bra.b   .l19dac
.l19daa:                                                ; $019DAA
    moveq   #$64,d0
.l19dac:                                                ; $019DAC
    move.w  d0,d3
    move.w  (a5),d0
    ext.l   d0
    addq.l  #$2,d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    addi.l  #$9,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0003,$ab2c                           ; jsr $03AB2C
    move.w  d3,d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($00041110).l
    dc.w    $4eb9,$0003,$b270                           ; jsr $03B270
    movem.l -$0028(a6),d2-d7/a2-a5
    unlk    a6
    rts
