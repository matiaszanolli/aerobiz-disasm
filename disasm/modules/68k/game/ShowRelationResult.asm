; ============================================================================
; ShowRelationResult -- Draws the relation result screen: computes percent outcome from char-pair score, splits it into filled/partial/empty tile runs, and renders three horizontal icon bars plus optional portrait
; Called: ?? times.
; 1256 bytes | $019DE6-$01A2CD
; ============================================================================
ShowRelationResult:                                                  ; $019DE6
    link    a6,#$0
    movem.l d2-d7/a2-a5,-(sp)
    movea.l $0008(a6),a2
    movea.l #$0d64,a3
    lea     $0016(a6),a4
    lea     $0012(a6),a5
    cmpi.w  #$1,$001a(a6)
    bne.b   .l19e58
    move.l  ($000A1AE4).l,-(sp)
    pea     ($00FF1804).l
    dc.w    $4eb9,$0000,$3fec                           ; jsr $003FEC
    pea     ($0020).w
    pea     ($0694).w
    pea     ($00FF1804).l
    dc.w    $4eb9,$0000,$4668                           ; jsr $004668
    pea     ($00070F58).l
    pea     ($0004).w
    pea     ($0004).w
    move.w  (a5),d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($001B).w
    jsr     (a3)
    lea     $0030(sp),sp
.l19e58:                                                ; $019E58
    pea     ($0020).w
    pea     ($0020).w
    clr.l   -(sp)
    clr.l   -(sp)
    dc.w    $4eb9,$0003,$a942                           ; jsr $03A942
    move.w  $000e(a6),d7
    addq.w  #$4,d7
    move.w  (a5),d6
    clr.w   d5
    moveq   #$0,d0
    move.b  $0001(a2),d0
    move.l  d0,-(sp)
    moveq   #$0,d0
    move.b  (a2),d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0000,$70dc                           ; jsr $0070DC
    move.w  d0,d2
    pea     ($0064).w
    pea     ($0096).w
    move.w  d2,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0001,$e11c                           ; jsr $01E11C
    lea     $0024(sp),sp
    move.w  d2,d0
    ext.l   d0
    moveq   #$14,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    move.w  d0,d4
    tst.w   $0004(a2)
    beq.b   .l19f02
    moveq   #$0,d0
    move.w  $0004(a2),d0
    move.w  d2,d1
    ext.l   d1
    cmp.l   d1,d0
    ble.b   .l19ee4
    moveq   #$0,d0
    move.w  $0004(a2),d0
    move.w  d2,d1
    ext.l   d1
    sub.l   d1,d0
    move.w  d4,d1
    ext.l   d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    move.l  d0,d3
    mulu.w  #$5,d3
    addi.w  #$32,d3
    bra.b   .l19f02
.l19ee4:                                                ; $019EE4
    move.w  d2,d0
    ext.l   d0
    moveq   #$0,d1
    move.w  $0004(a2),d1
    sub.l   d1,d0
    move.w  d4,d1
    ext.l   d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    mulu.w  #$5,d0
    moveq   #$32,d3
    sub.w   d0,d3
.l19f02:                                                ; $019F02
    cmpi.w  #$64,d3
    bge.b   .l19f0e
    move.w  d3,d0
    ext.l   d0
    bra.b   .l19f10
.l19f0e:                                                ; $019F0E
    moveq   #$64,d0
.l19f10:                                                ; $019F10
    move.w  d0,d3
    tst.w   d3
    ble.b   .l19f1c
    move.w  d3,d0
    ext.l   d0
    bra.b   .l19f1e
.l19f1c:                                                ; $019F1C
    moveq   #$0,d0
.l19f1e:                                                ; $019F1E
    move.w  d0,d3
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e08a                           ; jsr $03E08A
    move.w  d0,d2
    move.w  d3,d0
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e146                           ; jsr $03E146
    moveq   #$1,d1
    cmp.l   d0,d1
    ble.b   .l19f4c
    move.w  d3,d0
    ext.l   d0
    moveq   #$a,d1
    dc.w    $4eb9,$0003,$e146                           ; jsr $03E146
    bra.b   .l19f4e
.l19f4c:                                                ; $019F4C
    moveq   #$1,d0
.l19f4e:                                                ; $019F4E
    move.w  d0,d4
    tst.w   d2
    ble.b   .l19f88
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033a,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l19f88:                                                ; $019F88
    tst.w   d4
    beq.b   .l19fc4
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033b,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    pea     ($0001).w
    move.w  d6,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l19fc4:                                                ; $019FC4
    move.w  d2,d0
    ext.l   d0
    moveq   #$a,d1
    sub.l   d0,d1
    move.w  d4,d0
    ext.l   d0
    sub.l   d0,d1
    ble.b   .l1a01e
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033c,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$a,d1
    sub.l   d0,d1
    move.w  d4,d0
    ext.l   d0
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.w  d4,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l1a01e:                                                ; $01A01E
    move.w  (a5),d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    addi.l  #$9,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0003,$ab2c                           ; jsr $03AB2C
    moveq   #$0,d0
    move.w  $0004(a2),d0
    move.l  d0,-(sp)
    pea     ($00041128).l
    dc.w    $4eb9,$0003,$b246                           ; jsr $03B246
    move.w  (a5),d0
    ext.l   d0
    addq.l  #$1,d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    addi.l  #$9,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0003,$ab2c                           ; jsr $03AB2C
    subi.w  #$32,d3
    move.w  d3,d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($00041122).l
    dc.w    $4eb9,$0003,$b246                           ; jsr $03B246
    lea     $0020(sp),sp
    cmpi.b  #$0e,$000b(a2)
    bcc.b   .l1a092
    moveq   #$0,d4
    move.b  $000b(a2),d4
    bra.b   .l1a094
.l1a092:                                                ; $01A092
    moveq   #$e,d4
.l1a094:                                                ; $01A094
    cmpi.w  #$7,d4
    bge.b   .l1a0a0
    move.w  d4,d2
    ext.l   d2
    bra.b   .l1a0a2
.l1a0a0:                                                ; $01A0A0
    moveq   #$7,d2
.l1a0a2:                                                ; $01A0A2
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033e,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$2,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    cmpi.w  #$7,d2
    bge.b   .l1a11a
    move.w  d5,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$7,d1
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$2,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l1a11a:                                                ; $01A11A
    cmpi.b  #$07,$0003(a2)
    bcc.b   .l1a12a
    moveq   #$0,d2
    move.b  $0003(a2),d2
    bra.b   .l1a12c
.l1a12a:                                                ; $01A12A
    moveq   #$7,d2
.l1a12c:                                                ; $01A12C
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033d,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$2,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    move.w  d4,d2
    addi.w  #$fff9,d2
    tst.w   d2
    ble.b   .l1a170
    move.w  d2,d0
    ext.l   d0
    bra.b   .l1a172
.l1a170:                                                ; $01A170
    moveq   #$0,d0
.l1a172:                                                ; $01A172
    move.w  d0,d2
    tst.w   d2
    ble.b   .l1a1f0
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033e,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$3,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
    cmpi.w  #$7,d2
    bge.b   .l1a1f0
    move.w  d5,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$7,d1
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$3,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l1a1f0:                                                ; $01A1F0
    cmpi.w  #$7,d2
    bge.b   .l1a234
    move.w  d5,d0
    ext.l   d0
    addi.l  #$0328,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    moveq   #$7,d1
    sub.l   d0,d1
    move.l  d1,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$3,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l1a234:                                                ; $01A234
    moveq   #$0,d2
    move.b  $0003(a2),d2
    addi.w  #$fff9,d2
    tst.w   d2
    ble.b   .l1a276
    move.w  d5,d0
    ext.l   d0
    addi.l  #$033d,d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d2,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d6,d0
    ext.l   d0
    addq.l  #$3,d0
    move.l  d0,-(sp)
    move.w  d7,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  (a4),d0
    ext.l   d0
    move.l  d0,-(sp)
    pea     ($001A).w
    jsr     (a3)
    lea     $001c(sp),sp
.l1a276:                                                ; $01A276
    move.w  (a5),d0
    ext.l   d0
    addq.l  #$2,d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    ext.l   d0
    addi.l  #$a,d0
    move.l  d0,-(sp)
    dc.w    $4eb9,$0003,$ab2c                           ; jsr $03AB2C
    moveq   #$0,d0
    move.b  $0003(a2),d0
    move.l  d0,-(sp)
    pea     ($0004111C).l
    dc.w    $4eb9,$0003,$b270                           ; jsr $03B270
    move.w  (a5),d0
    addq.w  #$2,d0
    move.l  d0,-(sp)
    move.w  $000e(a6),d0
    addi.w  #$d,d0
    move.l  d0,-(sp)
    pea     ($0002).w
    pea     ($0003).w
    dc.w    $4eb9,$0000,$595e                           ; jsr $00595E
    movem.l -$0028(a6),d2-d7/a2-a5
    unlk    a6
    rts
