; ============================================================================
; RenderTileStrip -- Render a horizontal tile strip with fill blocks and partial-tile endpoints
; Called: ?? times.
; 480 bytes | $005CFE-$005EDD
; ============================================================================
RenderTileStrip:                                                  ; $005CFE
    link    a6,#-$24
    movem.l d2-d7/a2-a4,-(sp)
    move.l  $0010(a6),d2
    move.l  $000c(a6),d4
    move.l  $0008(a6),d5
    move.l  $0014(a6),d6
    move.l  $0018(a6),d7
    lea     -$0002(a6),a3
    movea.l #$0d64,a4
    move.w  d2,d3
    ext.l   d3
    asr.l   #$3,d3
    move.w  d6,d0
    ext.l   d0
    cmp.l   d0,d3
    bge.b   .l5d3a
    move.w  d2,d3
    ext.l   d3
    asr.l   #$3,d3
    bra.b   .l5d3e
.l5d3a:                                                 ; $005D3A
    move.w  d6,d3
    ext.l   d3
.l5d3e:                                                 ; $005D3E
    cmpi.w  #$2,d7
    bgt.b   .l5dba
    cmpi.w  #$1,d7
    bne.b   .l5d50
    move.w  #$8531,(a3)
    bra.b   .l5d54
.l5d50:                                                 ; $005D50
    move.w  #$8539,(a3)
.l5d54:                                                 ; $005D54
    tst.w   d3
    ble.b   .l5d80
    moveq   #$0,d0
    move.w  (a3),d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d3,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d4,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    clr.l   -(sp)
    pea     ($001A).w
    jsr     (a4)
    lea     $001c(sp),sp
.l5d80:                                                 ; $005D80
    move.w  d2,d0
    andi.w  #$7,d0
    beq.w   .l5ed4
    move.w  d2,d0
    andi.w  #$7,d0
    add.w   d0,(a3)
    pea     -$0002(a6)
    pea     ($0001).w
    pea     ($0001).w
    move.w  d4,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.w  d3,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    clr.l   -(sp)
    pea     ($001B).w
    bra.w   .l5ed2
.l5dba:                                                 ; $005DBA
    tst.w   d3
    ble.b   .l5dea
    move.w  #$8531,(a3)
    moveq   #$0,d0
    move.w  (a3),d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d3,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d4,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.l  d0,-(sp)
    clr.l   -(sp)
    pea     ($001A).w
    jsr     (a4)
    lea     $001c(sp),sp
.l5dea:                                                 ; $005DEA
    move.w  d2,d0
    andi.w  #$7,d0
    beq.w   .l5e9c
    lea     -$0022(a6),a2
    move.w  d2,d0
    andi.w  #$7,d0
    move.w  d0,(a3)
    pea     ($0020).w
    move.l  a2,-(sp)
    clr.l   -(sp)
    move.w  (a3),d0
    lsl.w   #$5,d0
    movea.l #$00048a7c,a0
    pea     (a0,d0.w)
    clr.l   -(sp)
    dc.w    $4eb9,$0001,$d538                           ; jsr $01D538
    addq.w  #$8,(a3)
    clr.w   d2
.l5e22:                                                 ; $005E22
    move.w  (a3),d0
    lsl.w   #$5,d0
    move.w  d2,d1
    add.w   d1,d1
    add.w   d1,d0
    movea.l #$00048a7c,a0
    move.w  (a0,d0.w),d0
    move.w  #$6666,d1
    eor.w   d1,d0
    move.w  d2,d1
    ext.l   d1
    add.l   d1,d1
    movea.l d1,a0
    or.w    d0,(a2,a0.l)
    addq.w  #$1,d2
    cmpi.w  #$10,d2
    blt.b   .l5e22
    move.w  #$8531,(a3)
    clr.l   -(sp)
    move.l  #$a820,-(sp)
    move.l  a2,-(sp)
    pea     ($0010).w
    pea     ($0002).w
    pea     ($0005).w
    jsr     (a4)
    lea     $002c(sp),sp
    pea     -$0002(a6)
    pea     ($0001).w
    pea     ($0001).w
    move.w  d4,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.w  d3,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    clr.l   -(sp)
    pea     ($001B).w
    jsr     (a4)
    lea     $001c(sp),sp
    addq.w  #$1,d3
.l5e9c:                                                 ; $005E9C
    cmp.w   d6,d3
    bge.b   .l5ed4
    move.w  #$8539,(a3)
    moveq   #$0,d0
    move.w  (a3),d0
    move.l  d0,-(sp)
    pea     ($0001).w
    move.w  d6,d0
    ext.l   d0
    move.w  d3,d1
    ext.l   d1
    sub.l   d1,d0
    move.l  d0,-(sp)
    move.w  d4,d0
    ext.l   d0
    move.l  d0,-(sp)
    move.w  d5,d0
    ext.l   d0
    move.w  d3,d1
    ext.l   d1
    add.l   d1,d0
    move.l  d0,-(sp)
    clr.l   -(sp)
    pea     ($001A).w
.l5ed2:                                                 ; $005ED2
    jsr     (a4)
.l5ed4:                                                 ; $005ED4
    movem.l -$0048(a6),d2-d7/a2-a4
    unlk    a6
    rts
